<!DOCTYPE html>
<html>
<head>
	<title>Invite Candidate to the Symantec Online Coding Problem</title>
	<meta charset="utf-8"/>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


<script type="text/javascript" src="/js/config.js" ></script>	
<script type="text/javascript" src="/js/utils.js" ></script>	
<script type="text/javascript" src="/js/uploadforms.js" ></script>	

<script type="text/javascript">

'use strict';



function validatForm()
{

	const checkboxesChecked  = 
		//both checkboxes required
		$('#full_time_student').is(':checked') &&
		$('#available_2020').is(':checked');

	const eduEmail = (env != "ocp") ||	//ignore for testing
		$('#email').val().endsWith('.edu');

	const valid = checkboxesChecked && eduEmail;
	
	if (!valid)
	{
		const message = "Please fix:\n" +
			"    -Your email must belong to a .edu domain.\n" +
			"    -You must be full-time student in Fall, 2019\n" +
			"    -You must be available to work full-time in 2020.";
		
		alert(message);
	}

	return valid;
}

function areYouSure()
{
	return confirm("You will have 7 days to solve your coding problem.  Ok to continue?");
}

$(document).ready(function(){

	prepareS3UploadForms();

});

function prepareinternRegForm()
{
	  if (!validatForm())
	  {
	  	return false;
	  }

	  if (!areYouSure())
	  {
	  	return false;
	  }

	  const formName = "internRegForm";
	  
	  setDestinationKey(formName);

	  setFormMetadata(formName);
}

function setDestinationKey(formName)
{	
	  //build key
	  const keyVal = "uploads/internshipRegistration/" + Math.uuid() + getUploadFileNameExt();

	  debug("keyval: " + keyVal);

	  const form = document.getElementById(formName);
	  let keys = form.querySelectorAll("[name=key]");
	  let keyInput = keys[0];
	  keyInput.value = keyVal;

	  debug("keyInput.value: " + keyInput.value);
}

function getUploadFileNameExt()
{
	const  resumeFile = $('#resumeFile').val();
	const ext = resumeFile.split('.').pop();	//pop returns last element of split

	debug("ext: " + ext);

	return "." + ext;
}


//this json is saved as metadata on the file uploaded to S3
function setFormMetadata(formName)
{
  const myObj = {"candidateFirst" : $('#first-name').val(),
    "candidateLast" : $('#last-name').val(),
    "candidateEmail" : $('#email').val(),
    "managerEmail" : "andrew_chang@symantec.com"
  };

  setMeta(formName, myObj);
}

</script>

<style>
p.h1 {
	font-weight: bold;
	font-size: 40px;

}

p.h2 {
	font-weight: bold;
	font-size: 24px;

}

body {

	width: 800px;
	margin-left: 100px;
}

#register-form {
	
	border-color: red;
}

.success {
	color: green;
}

.fail {
	color: red;
}

.warning
{
	font-weight: bold;
	font-size: 18px;
	font-style: italic;

}

input.email {
	min-width: 200px;
}

div.candidate, div.manager {
	width:800px;
	border-style: solid;
	padding: 10px;
	padding-top: 0px;
	margin-bottom: 20px;
}

p.formheading {

	font-weight: bold;
	font-size: 18px;
}

div.formlabel {
	padding: 0px;
	padding-top: 5px;
	padding-bottom: 20px;
}

</style>
</head>
<body>

<div id="instructions">
<p class="h1">Thank you for your interest in Symantec!</p>

<p class="h2">Welcome students!</p>
<p><b>To register</b> for the Symantec online coding problem, please <b>complete and submit the form below.</b></p>
	<ul>
		<li><p>You will immediately receive an email containing a link to your personal take-home coding problem.</p></li>
		<li><p>This exercise will take approximately 2-5 hours to complete.</p></li>
		<li><p>You must work alone and may not share your problem page with anyone.</p></li>
		<li><p>Your problem page will expire 7 days after you receive your link.</p></li>
	</ul>
<p>For any questions or issues, please email <a href="mailto://andrew_chang@symantec.com">andrew_chang@symantec.com</a>.</p>

</div>

<br>

<p class="h2">Timeline</p>
<p >This registration page will close on <b>Monday, November 19.</b></p>
<p >Students may continue working on their problem pages they expire.</p>

<br/>

<p class="h2">Register to receive your online coding problem:</p>
	<div class=candidate>
		<p class=formheading>Your information</p>

<!-- ************************** AUTO-GENERATED UPLOAD FORM "internRegForm" ************************** -->
<form id='internRegForm' action='FFFFFFFFFFFF' method='post' enctype='multipart/form-data' onsubmit='return(prepareinternRegForm());'>
	      <input type='hidden' name='key' value='uploads/internshipRegistration/${filename}'>
	      <input type='hidden' name='acl' value='private'> 
	      <input type='hidden' name='success_action_redirect' value='FFFFFFFFFFFF'>
	      <input type='hidden' name='policy' value='FFFFFFFFFFFF'>
	       <input type='hidden' name='x-amz-algorithm' value='AWS4-HMAC-SHA256'>
	       <input type='hidden' name='x-amz-credential' value='FFFFFFFFFFFF'>
	       <input type='hidden' name='x-amz-date' value='FFFFFFFFFFFF'>
	       <input type='hidden' name='x-amz-storage-class' value='REDUCED_REDUNDANCY'>
	       <input type='hidden' name='x-amz-signature' value='FFFFFFFFFFFF'>
	       <input type='hidden' name='x-amz-meta-data' value=''>

	      <!-- ADDITIONAL INPUT FIELDS -->

		<p>
		  <label for="first-name">First name:</label>
		  <input type="text" id="first-name" placeholder="first name..." required/>
		 </p>

		<p>
		  <label for="last-name">Last name:</label>
		  <input type="text" id="last-name" placeholder="last name..." required/>
		 </p>

		<p>	 
		  <label for="email">Email:</label>
		  <input class=email type="email" id="email" placeholder="email@myuniversity.edu" required/>
		</p>
		<div class='formlabel'>
			Resume: <input id='resumeFile' name='file' type='file' required> 
		</div>
		<p>Eligibility: </p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		  <input type="checkbox" id="full_time_student"/>
		  <label for="full_time_student">I will be enrolled as a full-time student in Fall of 2019.</label>
		</p>
		<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
		  <input type="checkbox" id="available_2020"/>
		  <label for="available_2020">I will be available to work full-time in 2020.</label>
		</p><br>


	      <!-- END ADDITIONAL INPUT FIELDS -->
	      <input type='submit' value='Submit'>
    </form>
<!-- ************************** END AUTO-GENERATED UPLOAD FORM "internRegForm" ************************** -->


	</div>


<span id="results"></span>

</body>
